{% extends 'plus500/base.html'%}
{% load static %}

{% block content %}
{% if user.is_authenticated %}
  <div class = "container">
    <div class = "text-center container">
      <br>
      <h2 class = "text-center">SEO Link Analyzer</h2>
      <br>
    </div>
  <!--  number of links and CATEFORIES SELECTION -->
  <form action="/home/" method="GET">
    <br>
    <label for="news"><b>Choose categories:</b></label><br>
    <input type="checkbox" id="news" name="news" value="News">
    <label for="news">News</label><br>
    <input type="checkbox" id="finance" name="finance" value="Finance">
    <label for="finance">Finance</label><br>
    <input type="checkbox" id="crypto" name="crypto" value="Crypto">
    <label for="crypto">Crypto</label><br>
    <input type="checkbox" id="forex" name="forex" value="Forex">
    <label for="forex">Forex</label><br>
    <input type="checkbox" id="commodities" name="commodities" value="Commodities">
    <label for="commodities">Commodities</label><br>
    <input type="checkbox" id="leisure" name="leisure" value="Leisure">
    <label for="leisure">Leisure</label><br>
    <input type="checkbox" name="select-all" id="select-all" />
    <label for="select-all">Select All Categories</label><br>
    <br>
    <script language="JavaScript">
      document.getElementById('select-all').onclick = function() {
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        for (var checkbox of checkboxes) {
          checkbox.checked = this.checked;
        }
      }
    </script>
    <br>
    <!-- <label for="links_num"><b>Choose number of links:</b></label><br>
    <input type="text" id="links_num" name="links_num" value={{num_of_links}}><br>
    <br> -->
    <div>
      <label for="selected_num"><b>Choose number of links:</b></label><br>
      <input type="radio" name="radio" id="selected_num" value="selected_num" checked/><input type="text" name="links_num" value="{{num_of_links}}" placeholder="Type number..." /><br>
      <input type="radio" name="radio" id="total_num" value="total_num"/>
      <label for="total_num">Show all</label><br>
    </div>
    <input type="submit" value="Submit and Search" class="btn btn-primary btn-lg">
    <br>
    {% if links_num_exception %}
      <div class="alert alert-danger" role="alert">
        Invalid <b>number of links</b> entered, please enter a valid number.
      </div>
    {% endif %}
  </form>

<br><br>
<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">Link pointing to a cometitor</th>
      <th scope="col">Domain of the link</th>
      <th scope="col">The Competitor which the link is pointing to</th>
      <th scope="col">Competitor Domain</th>
      <th scope="col">Domain Rating</th>
      <th scope="col">Refdomains</th>
      <th scope="col">Traffic</th>
      <th scope="col">Refdomains/Backlinks Ratio</th>
      <th scope="col">Link Category</th>
    </tr>
  </thead>
<tbody>
    {% for link in selected_links %}
      <tr>
        <td><a href="{{ link.url_from }}">{{link.title}}</a></td>
        <td>{{ link.url_domain }}</td>
        <td>{{ link.url_to }}</td>
        <td>{{ link.competitor }}</td>
        <td>{{ link.domain_rating }}</td>
        <td>{{ link.refdomains }}</td>
        <td>{{ link.traffic }}</td>
        <td type="number">{{ link.refdomains_backlinks_ratio }}</td>
        <td>{{ link.category }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% else %}
  <h4 class = "text-center">You need to login to continue</h4>
{% endif %}

{% endblock %}
